## Стадии жизненного цикла компонента в React?

Жизненный цикл компонента в React можно разбить на несколько стадий, каждая из которых соответствует определённым этапам существования компонента: от создания до удаления. Вот основные стадии жизненного цикла компонента:

### 1. Стадия монтирования (Mounting)
На этой стадии компонент создаётся и добавляется в DOM.

- **Методы жизненного цикла**:
  - **`constructor`**: Инициализация состояния и привязка методов.
  - **`static getDerivedStateFromProps`**: Позволяет обновлять состояние на основе изменившихся пропсов.
  - **`render`**: Отображает JSX.
  - **`componentDidMount`**: Вызывается сразу после монтирования, идеально подходит для выполнения сетевых запросов или инициализации сторонних библиотек.

### 2. Стадия обновления (Updating)
Компонент обновляется при изменении пропсов или состояния.

- **Методы жизненного цикла**:
  - **`static getDerivedStateFromProps`**: Аналогично монтированию, обновляет состояние на основе новых пропсов.
  - **`shouldComponentUpdate`**: Позволяет оптимизировать обновление компонента, возвращая `true` или `false`.
  - **`render`**: Отображает обновлённое состояние.
  - **`componentDidUpdate`**: Вызывается после обновления, позволяет выполнять дополнительные действия, основанные на предыдущих пропсах или состоянии.

### 3. Стадия размонтирования (Unmounting)
На этой стадии компонент удаляется из DOM.

- **Методы жизненного цикла**:
  - **`componentWillUnmount`**: Позволяет очистить ресурсы, такие как отмена подписок или таймеров, перед удалением компонента.

Стадия размонтирования компонента в React (componentWillUnmount для классовых компонентов или эффект с очисткой в useEffect для функциональных компонентов) чаще всего используется для следующих задач: 

1. Очистка подписок на события (`addEventListener`, WebSocket, Observer API).  
2. Очистка таймеров (`setTimeout`, `setInterval`).  
3. Отмена асинхронных запросов (`fetch`, `axios`, AbortController).  
4. Закрытие WebSocket-соединений.  
5. Остановка анимаций или любых сторонних эффектов.  
6. Сброс данных, сохранение состояния или логирование.  
7. Очистка глобальных переменных или ресурсов (например, удаление динамических данных в памяти).  
8. Удаление элементов, добавленных в `document` (например, динамические порталы).  
9. Отключение или деинициализация сторонних библиотек/плагинов.  
10. Очистка `Redux` или `Context` состояний, если они относятся только к компоненту.

### Примечания по использованию хуков

В функциональных компонентах с использованием хуков жизненный цикл можно контролировать с помощью хука `useEffect`, который может воспроизводить поведение различных методов жизненного цикла:

- **`useEffect`**:
  - Если передать массив зависимостей, хук будет срабатывать при изменении значений в этом массиве, что имитирует поведение обновления.
  - Если массив зависимостей пуст, хук будет срабатывать только один раз после монтирования, аналогично `componentDidMount`.
  - Функция очистки внутри `useEffect` выполняется перед размонтированием компонента, что аналогично `componentWillUnmount`.

### Заключение
Стадии жизненного цикла компонента позволяют разработчикам управлять поведением компонентов на каждом этапе их существования. Понимание этих стадий помогает создавать более эффективные и предсказуемые приложения на React.

![alt text](image_9.png)